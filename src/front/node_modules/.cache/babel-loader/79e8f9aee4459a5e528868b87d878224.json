{"ast":null,"code":"/*\n * Copyright (c) 2021, Oracle and/or its affiliates.\n *\n * This program is free software; you can redistribute it and/or modify\n * it under the terms of the GNU General Public License, version 2.0, as\n * published by the Free Software Foundation.\n *\n * This program is also distributed with certain software (including\n * but not limited to OpenSSL) that is licensed under separate terms,\n * as designated in a particular file or component or in included license\n * documentation.  The authors of MySQL hereby grant you an\n * additional permission to link the program and your derivative works\n * with the separately licensed software that they have included with\n * MySQL.\n *\n * Without limiting anything contained in the foregoing, this file,\n * which is part of MySQL Connector/Node.js, is also subject to the\n * Universal FOSS Exception, version 1.0, a copy of which can be found at\n * http://oss.oracle.com/licenses/universal-foss-exception.\n *\n * This program is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU General Public License, version 2.0, for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software Foundation, Inc.,\n * 51 Franklin St, Fifth Floor, Boston, MA 02110-1301  USA\n */\n'use strict';\n/**\n * Sort MySQL server endpoints based on priority.\n * @private\n * @param {Object[]} endpoints\n * @return {Object[]}\n */\n\nexports.sort = function () {\n  let endpoints = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return Array.from(endpoints).sort((a, b) => {\n    // The priority could not be defined, in which case, endpoints with an\n    // explicit \"priority\" should be more \"important\" than endpoints\n    // without one.\n    if (!Number.isInteger(a.priority) && Number.isInteger(b.priority)) {\n      return 1;\n    }\n\n    if (Number.isInteger(a.priority) && !Number.isInteger(b.priority)) {\n      return -1;\n    } // In a X DevAPI multi-host setting, the higher the priority of an\n    // endpoint, the more important it is.\n\n\n    if (a.priority !== b.priority) {\n      return b.priority - a.priority;\n    } // For endpoints with the same priority, the order is determined via\n    // random weighted selection.\n\n\n    return [-1, 1][Math.floor(Math.random() * 2)];\n  });\n};","map":{"version":3,"sources":["/home/ad/Bureau/infof308/src/node_modules/@mysql/xdevapi/lib/topology/multi-host.js"],"names":["exports","sort","endpoints","Array","from","a","b","Number","isInteger","priority","Math","floor","random"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;;AACAA,OAAO,CAACC,IAAR,GAAe,YAA0B;AAAA,MAAhBC,SAAgB,uEAAJ,EAAI;AACrC,SAAOC,KAAK,CAACC,IAAN,CAAWF,SAAX,EAAsBD,IAAtB,CAA2B,CAACI,CAAD,EAAIC,CAAJ,KAAU;AACxC;AACA;AACA;AACA,QAAI,CAACC,MAAM,CAACC,SAAP,CAAiBH,CAAC,CAACI,QAAnB,CAAD,IAAiCF,MAAM,CAACC,SAAP,CAAiBF,CAAC,CAACG,QAAnB,CAArC,EAAmE;AAC/D,aAAO,CAAP;AACH;;AAED,QAAIF,MAAM,CAACC,SAAP,CAAiBH,CAAC,CAACI,QAAnB,KAAgC,CAACF,MAAM,CAACC,SAAP,CAAiBF,CAAC,CAACG,QAAnB,CAArC,EAAmE;AAC/D,aAAO,CAAC,CAAR;AACH,KAVuC,CAYxC;AACA;;;AACA,QAAIJ,CAAC,CAACI,QAAF,KAAeH,CAAC,CAACG,QAArB,EAA+B;AAC3B,aAAOH,CAAC,CAACG,QAAF,GAAaJ,CAAC,CAACI,QAAtB;AACH,KAhBuC,CAkBxC;AACA;;;AACA,WAAO,CAAC,CAAC,CAAF,EAAK,CAAL,EAAQC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,CAA3B,CAAR,CAAP;AACH,GArBM,CAAP;AAsBH,CAvBD","sourcesContent":["/*\n * Copyright (c) 2021, Oracle and/or its affiliates.\n *\n * This program is free software; you can redistribute it and/or modify\n * it under the terms of the GNU General Public License, version 2.0, as\n * published by the Free Software Foundation.\n *\n * This program is also distributed with certain software (including\n * but not limited to OpenSSL) that is licensed under separate terms,\n * as designated in a particular file or component or in included license\n * documentation.  The authors of MySQL hereby grant you an\n * additional permission to link the program and your derivative works\n * with the separately licensed software that they have included with\n * MySQL.\n *\n * Without limiting anything contained in the foregoing, this file,\n * which is part of MySQL Connector/Node.js, is also subject to the\n * Universal FOSS Exception, version 1.0, a copy of which can be found at\n * http://oss.oracle.com/licenses/universal-foss-exception.\n *\n * This program is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU General Public License, version 2.0, for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software Foundation, Inc.,\n * 51 Franklin St, Fifth Floor, Boston, MA 02110-1301  USA\n */\n\n'use strict';\n\n/**\n * Sort MySQL server endpoints based on priority.\n * @private\n * @param {Object[]} endpoints\n * @return {Object[]}\n */\nexports.sort = function (endpoints = []) {\n    return Array.from(endpoints).sort((a, b) => {\n        // The priority could not be defined, in which case, endpoints with an\n        // explicit \"priority\" should be more \"important\" than endpoints\n        // without one.\n        if (!Number.isInteger(a.priority) && Number.isInteger(b.priority)) {\n            return 1;\n        }\n\n        if (Number.isInteger(a.priority) && !Number.isInteger(b.priority)) {\n            return -1;\n        }\n\n        // In a X DevAPI multi-host setting, the higher the priority of an\n        // endpoint, the more important it is.\n        if (a.priority !== b.priority) {\n            return b.priority - a.priority;\n        }\n\n        // For endpoints with the same priority, the order is determined via\n        // random weighted selection.\n        return [-1, 1][Math.floor(Math.random() * 2)];\n    });\n};\n"]},"metadata":{},"sourceType":"script"}